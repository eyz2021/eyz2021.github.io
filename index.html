<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关于eyz2021</title>
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome图标 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 配置Tailwind自定义样式 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#8B5CF6',
                        bili: {
                            pink: '#FB7299',
                            darkPink: '#DE557B',
                            lightPink: '#FF9EBC'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            }
            .bg-gradient-primary {
                background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            }
            .bg-bili-gradient {
                background: linear-gradient(135deg, #FB7299 0%, #DE557B 100%);
            }
        }
    </style>
    <style>
        /* 提示框容器 */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        /* 提示框内容 */
        
        /* CD图标样式 */
        .music-icon {
            position: relative;
            animation: rotate 20s linear infinite;
            animation-play-state: paused;
        }
        
        /* 播放时CD旋转 */
        .music-icon.playing {
            animation-play-state: running;
        }
        
        /* CD旋转动画 */
        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        /* 播放时CD旋转，暂停时停止旋转 */
        .cd-paused {
            animation-play-state: paused !important;
        }
        .tooltip {
            visibility: hidden;
            opacity: 0;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            transition: opacity 0.3s;
            font-size: 14px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        /* 提示框小三角 */
        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        /* 显示提示框的类 */
        .tooltip.show {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen py-12 px-4 font-sans">
    <div class="max-w-4xl mx-auto">
        <!-- 主标题 -->
        <div class="text-center mb-10">
            <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-gray-800 mb-2">Hello, world!</h1>
            <div class="w-20 h-1 bg-primary mx-auto rounded-full"></div>
        </div>

        <!-- 个人信息主卡片 -->
        <div class="blur-transparent rounded-2xl shadow-lg overflow-hidden mb-10 card-hover">
            <div class="md:flex">
                <!-- 左侧：个人基本信息 -->
                <div class="md:w-1/2 p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-20 h-20 rounded-full overflow-hidden mr-4 border-4 border-primary">
                            <img src="res/avatar.jpg" alt="个人头像" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">eyz2021</h2>
                            <p class="text-gray-600">命里有时终须有</p>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                            <i class="fa fa-user-circle text-primary mr-2"></i>关于我
                        </h3>
                        <p class="text-gray-600 leading-relaxed">
                            高二 | 沈阳市第二十中学
                        </p>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                            <i class="fa fa-contact-card text-primary mr-2"></i>联系方式
                        </h3>
                        <ul class="space-y-2 text-gray-600">
                            <li class="flex items-center">
                                <i class="fa fa-envelope text-primary w-5"></i>
                                <span class="ml-2">thnpython@163.com</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fa fa-qq text-primary w-5"></i>
                                <span class="ml-2">2528363953</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fa fa-map-marker text-primary w-5"></i>
                                <span class="ml-2">辽宁省沈阳市</span>
                            </li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                            <i class="fa fa-link text-primary mr-2"></i>社交媒体
                        </h3>
                        <div class="flex space-x-4">
                            <a href="https://cubing.com/results/person/2025TANG12" target="_blank"
                                class="w-10 h-10 rounded-full bg-[#1DA1F2] flex items-center justify-center text-white hover:opacity-90 transition-opacity">
                                <i class="fa fa-cube"></i>
                            </a>
                            <a href="https://github.com/eyz2021" target="_blank"
                                class="w-10 h-10 rounded-full bg-[#4267B2] flex items-center justify-center text-white hover:opacity-90 transition-opacity">
                                <i class="fa fa-github"></i>
                            </a>
                            <a href="https://youtube.com/@eyz2021" target="_blank"
                                class="w-10 h-10 rounded-full bg-[#E60023] flex items-center justify-center text-white hover:opacity-90 transition-opacity">
                                <i class="fa fa-youtube"></i>
                            </a>

                        </div>
                    </div>
                </div>

                <!-- 右侧：B站用户信息卡片 -->
                <div class="md:w-1/2 p-8 border-t md:border-t-0 md:border-l border-gray-100">
                    <!-- B站用户信息卡片 -->
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover">
                        <!-- 卡片头部（优化高度，减少头像上方空隙） -->
                        <div class="bg-bili-gradient p-3 relative h-14">
                            <!-- 头像（调整定位，确保完整显示同时减少上方空隙） -->
                            <div
                                class="absolute -bottom-10 left-3 w-20 h-20 bg-white rounded-full border-3 border-white overflow-hidden">
                                <img id="biliAvatar" src="" alt="B站用户头像" class="w-full h-full object-cover">
                            </div>
                        </div>

                        <!-- 卡片内容 -->
                        <div class="pt-12 px-4 pb-4">
                            <!-- 基础信息 -->
                            <div class="mb-4 ml-1">
                                <div class="flex items-center gap-2 mb-1">
                                    <h4 id="biliName" class="text-xl font-bold text-gray-800">加载中...</h4>
                                    <span id="biliLevel"
                                        class="bg-bili-pink text-white text-xs px-2 py-1 rounded-full">LV.0</span>
                                </div>
                                <p id="biliSign" class="text-gray-600 text-sm">未设置签名</p>
                            </div>

                            <!-- 统计数据 -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-center mb-4">
                                <div class="bg-gray-50 p-2 rounded-lg">
                                    <p id="biliFans" class="text-lg font-bold text-bili-pink">0</p>
                                    <p class="text-gray-500 text-xs mt-1">粉丝数</p>
                                </div>
                                <div class="bg-gray-50 p-2 rounded-lg">
                                    <p id="biliFollow" class="text-lg font-bold text-bili-pink">0</p>
                                    <p class="text-gray-500 text-xs mt-1">关注数</p>
                                </div>
                                <div class="bg-gray-50 p-2 rounded-lg">
                                    <p id="biliVideo" class="text-lg font-bold text-bili-pink">0</p>
                                    <p class="text-gray-500 text-xs mt-1">投稿数</p>
                                </div>
                                <div class="bg-gray-50 p-2 rounded-lg">
                                    <p id="biliLike" class="text-lg font-bold text-bili-pink">0</p>
                                    <p class="text-gray-500 text-xs mt-1">获赞数</p>
                                </div>
                            </div>

                            <!-- 扩展信息 -->
                            <div class="space-y-2 mb-4 text-sm">
                                <div class="flex items-center text-gray-600">
                                    <i class="fa fa-venus-mars w-5 text-bili-pink"></i>
                                    <span id="biliSex">未知</span>
                                </div>
                                <div class="flex items-center text-gray-600">
                                    <i class="fa fa-diamond w-5 text-bili-pink"></i>
                                    <span id="biliVip">非会员</span>
                                </div>
                            </div>

                            <!-- 跳转按钮 -->
                            <a id="biliLink" href="" target="_blank"
                                class="inline-flex items-center gap-1 bg-bili-pink hover:bg-bili-darkPink text-white px-3 py-1.5 rounded-lg text-sm transition-colors">
                                <i class="fa fa-external-link"></i>
                                <span>访问我的B站空间</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 技能与特长 -->
        <div class="grid md:grid-cols-2 gap-6 mb-10">
            <div class="bg-white p-6 rounded-xl shadow-md card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fa fa-lightbulb-o text-accent mr-2"></i>专业技能
                </h3>
                <div class="flex flex-wrap gap-2">
                    <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm">没有！目前主业是学习</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-md card-hover">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <i class="fa fa-heart text-secondary mr-2"></i>兴趣爱好
                </h3>
                <div class="flex flex-wrap gap-2">
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">编程</span>
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">魔方</span>
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">音乐</span>
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">minecraft</span>
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">日语</span>
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">羽毛球</span>
                    <span class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm">猫和老鼠手游</span>
                    <!-- GED标签带延迟提示 -->
                    <div class="tooltip-container">
                        <a href="ged.html"
                            class="bg-green-50 text-green-700 px-3 py-1 rounded-full text-sm hover:bg-green-100 transition-colors cursor-pointer">GED</a>

                        <!-- 提示内容 -->
                        <div class="tooltip" id="gedTooltip">
                            你说得对，但是《Girls Egg
                            Dystopia》（日语：ガールズ·エッグ·ディストピア，简称GED）是ユイザキカズヤ创作的系列漫画，于2016年8月12日开始发售，目前仍在更新中。
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // 获取元素
            const tooltipContainer = document.querySelector('.tooltip-container');
            const tooltip = document.getElementById('gedTooltip');
            let delayTimer;

            // 鼠标进入 - 延迟显示提示
            tooltipContainer.addEventListener('mouseenter', () => {
                // 设置500ms延迟显示（可调整时间）
                delayTimer = setTimeout(() => {
                    tooltip.classList.add('show');
                }, 500);
            });

            // 鼠标离开 - 立即隐藏提示并清除计时器
            tooltipContainer.addEventListener('mouseleave', () => {
                clearTimeout(delayTimer);
                tooltip.classList.remove('show');
            });
        </script>


        <!-- 博客入口 -->
        <div class="bg-white p-6 rounded-xl shadow-md card-hover mb-10">
            <a href="Blog/index.html" target="_blank" class="flex items-center justify-between w-full">
                <div class="flex items-center">
                    <div class="w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white mr-4">
                        <i class="fa fa-rss text-xl"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">访问我的博客</h3>
                        <p class="text-gray-500 text-sm">查看我的文章和分享</p>
                    </div>
                </div>
                <i class="fa fa-arrow-right text-gray-400 transition-transform hover:translate-x-1"></i>
            </a>
        </div>

        <!-- 底部音乐播放器 -->
        <div id="musicPlayer" class="fixed bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full w-[80%] max-w-4xl backdrop-blur-md bg-black/80 text-white shadow-lg z-50 py-2 px-4 rounded-t-lg rounded-b-lg transition-all duration-300 focus:outline-none">
                <div class="flex items-center justify-between">
                    <!-- 歌曲信息 -->
                    <div class="flex items-center w-1/4">
                        <div class="w-10 h-10 bg-gray-700 rounded-full overflow-hidden mr-3 flex-shrink-0 flex items-center justify-center">
                            <i class="fa fa-music music-icon text-white text-2xl"></i>
                        </div>
                        <div class="overflow-hidden">
                            <h4 id="songTitle" class="font-medium text-sm truncate">加载中...</h4>
                            <p id="songArtist" class="text-gray-400 text-xs truncate">--</p>
                        </div>
                    </div>
                    
                    <!-- 播放控制 -->
                    <div class="flex flex-col items-center w-2/4">
                        <!-- 时间和进度条 -->
                        <div class="flex items-center w-full mb-1">
                            <span id="currentTime" class="text-xs text-gray-400 mr-2">00:00</span>
                            <div class="flex-1 h-1 bg-gray-700 rounded-full overflow-hidden relative cursor-pointer">
                                <div id="musicProgress" class="h-full bg-primary rounded-full" style="width: 0%"></div>
                                <div id="musicProgressHandle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 hover:opacity-100 transition-opacity duration-200"></div>
                            </div>
                            <span id="totalTime" class="text-xs text-gray-400 ml-2">00:00</span>
                        </div>
                        
                        <!-- 控制按钮 -->
                        <div class="flex items-center space-x-4">
                            <button id="playMode" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fa fa-list-ol"></i>
                            </button>
                            <button id="prevSong" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fa fa-step-backward"></i>
                            </button>
                            <button id="musicPlayPause" class="w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center hover:bg-primary/90 transition-colors">
                                <i class="fa fa-play"></i>
                            </button>
                            <button id="nextSong" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fa fa-step-forward"></i>
                            </button>
                            <button id="musicListToggle" class="text-gray-400 hover:text-white transition-colors">
                                <i class="fa fa-list"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 音量控制 -->
                    <div class="flex items-center w-1/4 justify-end">
                        <button id="volumeToggle" class="text-gray-400 hover:text-white transition-colors mr-2">
                            <i class="fa fa-volume-up"></i>
                        </button>
                        <div class="w-20 h-1 bg-gray-700 rounded-full overflow-hidden relative cursor-pointer">
                            <div id="musicVolume" class="h-full bg-primary rounded-full" style="width: 70%"></div>
                            <div id="musicVolumeHandle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full opacity-0 hover:opacity-100 transition-opacity duration-200"></div>
                        </div>
                    </div>
                </div>
        </div>
        
        <!-- 播放列表 -->
        <div id="musicList" class="fixed bottom-[70px] left-1/2 transform -translate-x-1/2 w-[80%] max-w-4xl backdrop-blur-md bg-gray-900/90 text-white shadow-lg z-40 max-h-60 overflow-y-auto hidden transition-all duration-300 rounded-lg">
            <div class="py-2 px-4">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="font-medium">播放列表</h3>
                    <button id="closeMusicList" class="text-gray-400 hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
                <ul id="playlistItems" class="divide-y divide-gray-800">
                    <!-- 播放列表项将通过JavaScript动态添加 -->
                </ul>
            </div>
        </div>

        <!-- 版权信息 -->
        <div class="text-center text-gray-500 text-sm py-4">
            <p>© 2025 个人名片 | eyz2021</p>
        </div>
    </div>

    <!-- 音乐播放器脚本 -->
    <script>
        // 创建音频元素
        const audio = new Audio();
        
        // 获取DOM元素
        const musicPlayer = document.getElementById('musicPlayer');
        const musicPlayPause = document.getElementById('musicPlayPause');
        const musicProgress = document.getElementById('musicProgress');
        const musicVolume = document.getElementById('musicVolume');
        const currentTime = document.getElementById('currentTime');
        const totalTime = document.getElementById('totalTime');
        const songTitle = document.getElementById('songTitle');
        const songArtist = document.getElementById('songArtist');
        const albumCover = document.getElementById('albumCover');
        const prevSong = document.getElementById('prevSong');
        const nextSong = document.getElementById('nextSong');
        const volumeToggle = document.getElementById('volumeToggle');
        const musicListToggle = document.getElementById('musicListToggle');
        const closeMusicList = document.getElementById('closeMusicList');
        const musicList = document.getElementById('musicList');
        const playlistItems = document.getElementById('playlistItems');
        const playMode = document.getElementById('playMode');
        
        // 音乐文件列表 - 手动列出musics目录下的所有音乐文件
        const musicFiles = [
            'musics/COP,乐正绫 - 碎梦(short ver).mp3',
            'musics/ChiliChill,洛天依Official - 我的悲伤是水做的.mp3',
            'musics/PoKeR,洛天依Official - 歪歪？.mp3',
            'musics/WOVOP,乐正绫 - 我们会在阳光下再次相拥.mp3',
            'musics/WOVOP,乐正绫 - 旧时约.mp3',
            'musics/WOVOP,洛天依 - 淋完这场雨就忘记你吧.mp3',
            'musics/WOVOP,洛天依 - 致我们梦想的舞台.mp3',
            'musics/乐正绫,COP - 世末歌者.mp3',
            'musics/乐正绫,Soda纯白,洛天依Official - 白石溪.mp3',
            'musics/夜踊_Yoodori,洛天依 - 情绪未响应.mp3',
            'musics/洛天依Official - 无夏之城.mp3',
            'musics/洛天依Official - 礼物.mp3',
            'musics/洛天依Official,ilem - 勾指起誓.mp3',
            'musics/洛天依Official,乐正绫 - 霜雪千年 (官方重置版).mp3',
            'musics/清风最梦,洛天依Official - 再次相遇.mp3',
            'musics/莫默OwO,洛天依 - 世末积雨云 洛天依v3.mp3',
            'musics/著小生zoki,洛天依Official - 【洛天依】影子小姐.mp3',
            'musics/闹闹丶,FFF君,欧Ωhm - 老街北.mp3',
            'musics/阿良良木健,洛天依 - iloveu.mp3',
            'musics/阿良良木健,洛天依 - 夏感交响.mp3'
        ];
        
        // 解析歌曲信息
        const parseSongInfo = (fileName) => {
            // 提取文件名（去掉路径）
            const baseName = fileName.split('/').pop();
            // 去掉扩展名
            const nameWithoutExt = baseName.replace(/\.mp3$/, '');
            // 尝试解析歌手和歌曲名
            const parts = nameWithoutExt.split(' - ');
            if (parts.length === 2) {
                return {
                    artist: parts[0],
                    title: parts[1]
                };
            }
            return {
                artist: 'Unknown',
                title: nameWithoutExt
            };
        };
        
        // 播放模式：0-循环播放，1-随机播放，2-单曲循环
        let playModeValue = 0;
        // 当前播放索引
        let currentIndex = 0;
        // 当前音量
        let currentVolume = 0.7;
        // 是否静音
        let isMuted = false;
        
        // 设置初始音量
        audio.volume = currentVolume;
        
        // 播放指定索引的歌曲
        function playSong(index) {
            if (index >= 0 && index < musicFiles.length) {
                currentIndex = index;
                const musicFile = musicFiles[index];
                
                // 简化URL处理，直接使用原始路径
                audio.src = musicFile;
                
                // 更新歌曲信息
                const songInfo = parseSongInfo(musicFile);
                songTitle.textContent = songInfo.title;
                songArtist.textContent = songInfo.artist;
                
                // 更新播放列表选中状态
                updatePlaylistSelection();
                
                // 自动播放并处理错误
                audio.play().catch(error => {
                    console.error('播放音乐时出错:', error);
                    // 错误处理已在audio的error事件监听器中统一处理
                });
                musicPlayPause.innerHTML = '<i class="fa fa-pause"></i>';
                // 开始CD旋转
                document.querySelector('.music-icon').classList.add('playing');
            }
        }
        
        // 更新播放列表选中状态
        function updatePlaylistSelection() {
            const items = playlistItems.querySelectorAll('li');
            items.forEach((item, index) => {
                if (index === currentIndex) {
                    item.classList.add('bg-gray-800');
                } else {
                    item.classList.remove('bg-gray-800');
                }
            });
        }
        
        // 创建播放列表
        function createPlaylist() {
            playlistItems.innerHTML = '';
            
            // 为每首歌曲获取时长信息
            const getSongDuration = (filePath) => {
                return new Promise((resolve) => {
                    const tempAudio = new Audio();
                    tempAudio.preload = 'metadata';
                    
                    tempAudio.addEventListener('loadedmetadata', () => {
                        tempAudio.remove(); // 加载完成后移除临时音频元素
                        if (!isNaN(tempAudio.duration)) {
                            resolve(formatTime(tempAudio.duration));
                        } else {
                            resolve('--:--');
                        }
                    });
                    
                    tempAudio.addEventListener('error', () => {
                        tempAudio.remove();
                        resolve('--:--');
                    });
                    
                    // 简化URL处理，直接使用原始路径获取时长
                        tempAudio.src = filePath;
                });
            };
            
            // 为每首歌曲创建列表项并异步获取时长
            musicFiles.forEach(async (file, index) => {
                const songInfo = parseSongInfo(file);
                const li = document.createElement('li');
                li.className = 'py-2 px-3 hover:bg-gray-800 transition-colors cursor-pointer';
                
                // 先显示默认时长，稍后更新
                li.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm font-medium">${songInfo.title}</div>
                            <div class="text-xs text-gray-400">${songInfo.artist}</div>
                        </div>
                        <span class="text-xs text-gray-500 duration-span">--:--</span>
                    </div>
                `;
                
                li.addEventListener('click', () => playSong(index));
                playlistItems.appendChild(li);
                
                // 异步获取并更新时长
                try {
                    const duration = await getSongDuration(file);
                    const durationSpan = li.querySelector('.duration-span');
                    if (durationSpan) {
                        durationSpan.textContent = duration;
                    }
                } catch (error) {
                    console.error('获取歌曲时长失败:', error);
                }
            });
        }
        
        // 播放/暂停按钮点击事件
        musicPlayPause.addEventListener('click', () => {
            if (audio.paused) {
                if (!audio.src) {
                    // 如果还没有加载歌曲，则播放第一首
                    playSong(0);
                } else {
                    audio.play().catch(error => console.error('播放音乐时出错:', error));
                    musicPlayPause.innerHTML = '<i class="fa fa-pause"></i>';
                    // 开始CD旋转
                    document.querySelector('.music-icon').classList.add('playing');
                }
            } else {
                audio.pause();
                musicPlayPause.innerHTML = '<i class="fa fa-play"></i>';
                // 停止CD旋转
                document.querySelector('.music-icon').classList.remove('playing');
            }
        });
        
        // 上一曲按钮点击事件
        prevSong.addEventListener('click', () => {
            if (playModeValue === 1) {
                // 随机播放模式
                const randomIndex = Math.floor(Math.random() * musicFiles.length);
                playSong(randomIndex);
            } else {
                // 正常模式
                playSong((currentIndex - 1 + musicFiles.length) % musicFiles.length);
            }
        });
        
        // 下一曲按钮点击事件
        nextSong.addEventListener('click', () => {
            if (playModeValue === 1) {
                // 随机播放模式
                const randomIndex = Math.floor(Math.random() * musicFiles.length);
                playSong(randomIndex);
            } else {
                // 正常模式
                playSong((currentIndex + 1) % musicFiles.length);
            }
        });
        
        // 播放模式切换
        playMode.addEventListener('click', () => {
            playModeValue = (playModeValue + 1) % 3;
            switch (playModeValue) {
                case 0: // 顺序播放
                    playMode.innerHTML = '<i class="fa fa-list-ol"></i>';
                    break;
                case 1: // 随机播放
                    playMode.innerHTML = '<i class="fa fa-random"></i>';
                    break;
                case 2: // 单曲循环
                    playMode.innerHTML = '<i class="fa fa-repeat"></i>';
                    break;
            }
        });
        
        // 音量切换
        volumeToggle.addEventListener('click', () => {
            isMuted = !isMuted;
            audio.muted = isMuted;
            if (isMuted) {
                volumeToggle.innerHTML = '<i class="fa fa-volume-off"></i>';
            } else {
                volumeToggle.innerHTML = '<i class="fa fa-volume-up"></i>';
            }
        });
        
        // 播放列表显示/隐藏 - 确保播放器先显示
        musicListToggle.addEventListener('click', () => {
            if (!isPlayerVisible) {
                showPlayer();
            }
            musicList.classList.toggle('hidden');
        });
        
        closeMusicList.addEventListener('click', () => {
            musicList.classList.add('hidden');
        });
        
        // 音频元数据加载完成后更新总时长
        audio.addEventListener('loadedmetadata', () => {
            if (!isNaN(audio.duration)) {
                totalTime.textContent = formatTime(audio.duration);
            }
        });
        
        // 音频播放位置更新时更新进度条
        audio.addEventListener('timeupdate', () => {
            if (!isNaN(audio.duration)) {
                const progress = (audio.currentTime / audio.duration) * 100;
                musicProgress.style.width = progress + '%';
                currentTime.textContent = formatTime(audio.currentTime);
            }
        });
        
        // 音频播放结束时
        audio.addEventListener('ended', () => {
            if (playModeValue === 2) {
                // 单曲循环
                audio.currentTime = 0;
                audio.play().catch(error => {
                    console.error('单曲循环播放时出错:', error);
                    setTimeout(() => nextSong.click(), 1000);
                });
            } else {
                // 循环播放或随机播放
                nextSong.click();
            }
        });
        
        // 添加错误事件监听器
        audio.addEventListener('error', (event) => {
            console.error('音频加载错误:', event);
            // 显示加载错误提示
            songTitle.textContent = '加载失败';
            songArtist.textContent = '尝试下一首';
            // 延迟后尝试下一首
            setTimeout(() => nextSong.click(), 1500);
        });
        
        // 获取滑块元素
        const musicProgressHandle = document.getElementById('musicProgressHandle');
        const musicVolumeHandle = document.getElementById('musicVolumeHandle');
        let isDraggingProgress = false;
        let isDraggingVolume = false;
        
        // 进度条事件处理
        function updateProgressBar(pos) {
            if (!isNaN(audio.duration)) {
                audio.currentTime = pos * audio.duration;
                musicProgress.style.width = (pos * 100) + '%';
                updateProgressHandlePosition(pos);
            }
        }
        
        function updateProgressHandlePosition(pos) {
            musicProgressHandle.style.left = (pos * 100) + '%';
            musicProgressHandle.style.transform = 'translate(-50%, -50%)';
        }
        
        // 音量条事件处理
        function updateVolumeBar(pos) {
            currentVolume = Math.max(0, Math.min(1, pos));
            audio.volume = currentVolume;
            musicVolume.style.width = (currentVolume * 100) + '%';
            updateVolumeHandlePosition(pos);
            
            // 如果当前是静音状态，取消静音
            if (isMuted) {
                isMuted = false;
                audio.muted = false;
                volumeToggle.innerHTML = '<i class="fa fa-volume-up"></i>';
            }
        }
        
        function updateVolumeHandlePosition(pos) {
            musicVolumeHandle.style.left = (pos * 100) + '%';
            musicVolumeHandle.style.transform = 'translate(-50%, -50%)';
        }
        
        // 进度条点击事件
        musicProgress.parentElement.addEventListener('click', (e) => {
            if (!isDraggingProgress && !isDraggingVolume) {
                const rect = musicProgress.parentElement.getBoundingClientRect();
                const pos = (e.clientX - rect.left) / rect.width;
                updateProgressBar(pos);
            }
        });
        
        // 音量条点击事件
        musicVolume.parentElement.addEventListener('click', (e) => {
            if (!isDraggingProgress && !isDraggingVolume) {
                const rect = musicVolume.parentElement.getBoundingClientRect();
                const pos = (e.clientX - rect.left) / rect.width;
                updateVolumeBar(pos);
            }
        });
        
        // 进度条拖动事件
        musicProgress.parentElement.addEventListener('mousedown', (e) => {
            isDraggingProgress = true;
            musicProgressHandle.style.opacity = '1';
            
            const rect = musicProgress.parentElement.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            updateProgressBar(pos);
            
            // 阻止默认行为，避免选中文本
            e.preventDefault();
        });
        
        // 音量条拖动事件
        musicVolume.parentElement.addEventListener('mousedown', (e) => {
            isDraggingVolume = true;
            musicVolumeHandle.style.opacity = '1';
            
            const rect = musicVolume.parentElement.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            updateVolumeBar(pos);
            
            // 阻止默认行为，避免选中文本
            e.preventDefault();
        });
        
        // 全局鼠标移动事件处理拖动
        document.addEventListener('mousemove', (e) => {
            if (isDraggingProgress) {
                const rect = musicProgress.parentElement.getBoundingClientRect();
                let pos = (e.clientX - rect.left) / rect.width;
                // 限制在0-1范围内
                pos = Math.max(0, Math.min(1, pos));
                updateProgressBar(pos);
            } else if (isDraggingVolume) {
                const rect = musicVolume.parentElement.getBoundingClientRect();
                let pos = (e.clientX - rect.left) / rect.width;
                // 限制在0-1范围内
                pos = Math.max(0, Math.min(1, pos));
                updateVolumeBar(pos);
            }
        });
        
        // 全局鼠标释放事件结束拖动
        document.addEventListener('mouseup', () => {
            if (isDraggingProgress) {
                isDraggingProgress = false;
                // 鼠标悬停时再显示滑块
                setTimeout(() => {
                    if (!isHoveringProgress) {
                        musicProgressHandle.style.opacity = '0';
                    }
                }, 300);
            } else if (isDraggingVolume) {
                isDraggingVolume = false;
                // 鼠标悬停时再显示滑块
                setTimeout(() => {
                    if (!isHoveringVolume) {
                        musicVolumeHandle.style.opacity = '0';
                    }
                }, 300);
            }
        });
        
        // 鼠标悬停事件，显示滑块
        let isHoveringProgress = false;
        let isHoveringVolume = false;
        
        musicProgress.parentElement.addEventListener('mouseenter', () => {
            isHoveringProgress = true;
            musicProgressHandle.style.opacity = '1';
        });
        
        musicProgress.parentElement.addEventListener('mouseleave', () => {
            isHoveringProgress = false;
            if (!isDraggingProgress) {
                musicProgressHandle.style.opacity = '0';
            }
        });
        
        musicVolume.parentElement.addEventListener('mouseenter', () => {
            isHoveringVolume = true;
            musicVolumeHandle.style.opacity = '1';
        });
        
        musicVolume.parentElement.addEventListener('mouseleave', () => {
            isHoveringVolume = false;
            if (!isDraggingVolume) {
                musicVolumeHandle.style.opacity = '0';
            }
        });
        
        // 初始化滑块位置
        updateProgressHandlePosition(0);
        updateVolumeHandlePosition(currentVolume);
        
        // 格式化时间
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }
        
        // 初始化播放列表
        createPlaylist();
        
        // 播放器焦点隐藏功能实现
        let isPlayerVisible = false;
        const bottomSensitivityArea = 100; // 底部敏感区域高度（像素）
        let hideTimer = null; // 隐藏播放器的定时器
        
        // 确保播放器默认是隐藏的
        musicPlayer.style.transform = 'translate(-50%, 100%)';
        
        // 显示播放器
        function showPlayer() {
            // 清除之前的隐藏定时器
            if (hideTimer) {
                clearTimeout(hideTimer);
                hideTimer = null;
            }
            
            if (!isPlayerVisible) {
                musicPlayer.style.transform = 'translate(-50%, 0)';
                isPlayerVisible = true;
                // 显示时重置播放列表的位置
                if (!musicList.classList.contains('hidden')) {
                    musicList.style.bottom = '90px';
                }
            }
        }
        
        // 隐藏播放器到底部
        function hidePlayer() {
            if (isPlayerVisible) {
                musicPlayer.style.transform = 'translate(-50%, 100%)';
                isPlayerVisible = false;
                // 隐藏时也要隐藏播放列表
                if (!musicList.classList.contains('hidden')) {
                    musicList.classList.add('hidden');
                }
            }
        }
        
        // 创建鼠标跟踪函数，专门用于检测底部区域
        function trackMousePosition(e) {
            // 检查鼠标是否在底部敏感区域内
            const isInBottomArea = e.clientY > window.innerHeight - bottomSensitivityArea;
            
            if (isInBottomArea && !isPlayerVisible) {
                // 如果鼠标在底部区域且播放器当前是隐藏的，则显示播放器
                showPlayer();
            }
        }
        
        // 为播放器添加鼠标进入事件，清除隐藏定时器
        musicPlayer.addEventListener('mouseenter', function() {
            if (hideTimer) {
                clearTimeout(hideTimer);
                hideTimer = null;
            }
        });
        
        // 为播放器添加鼠标离开事件
        musicPlayer.addEventListener('mouseleave', function() {
            // 清除之前的定时器（如果有）
            if (hideTimer) {
                clearTimeout(hideTimer);
            }
            
            // 延迟一小段时间，让用户有时间将鼠标移回播放器
            hideTimer = setTimeout(() => {
                // 直接检查鼠标位置，不再依赖mousemove事件
                const rect = musicPlayer.getBoundingClientRect();
                const x = window.event?.clientX || 0;
                const y = window.event?.clientY || 0;
                
                // 如果播放列表是打开的，则不隐藏播放器
                if (musicList.classList.contains('hidden')) {
                    // 检查鼠标是否在播放器区域外
                    if (x < rect.left || x > rect.right || y < rect.top || y > rect.bottom) {
                        hidePlayer();
                    }
                }
            }, 500); // 500毫秒的延迟，给用户足够的反应时间
        });
        
        // 为播放列表添加鼠标离开事件 - 当播放列表打开时不隐藏播放器
        musicList.addEventListener('mouseleave', function() {
            // 当播放列表打开时，不自动隐藏播放器
            // 用户需要手动关闭播放列表或点击其他区域
        });
        
        // 监听整个文档的鼠标移动事件
        document.addEventListener('mousemove', trackMousePosition);
        
        // 关闭播放列表时的处理
        closeMusicList.addEventListener('click', function() {
            musicList.classList.add('hidden');
            // 延迟隐藏播放器，给用户足够的时间反应
            // 清除之前的定时器（如果有）
            if (hideTimer) {
                clearTimeout(hideTimer);
            }
            
            hideTimer = setTimeout(() => {
                // 检查播放列表是否真的关闭了
                if (musicList.classList.contains('hidden')) {
                    hidePlayer();
                }
            }, 1000);
        });
    </script>

    <!-- JavaScript逻辑 -->
    <script>
        // 获取B站用户信息相关DOM
        const biliAvatar = document.getElementById('biliAvatar');
        const biliName = document.getElementById('biliName');
        const biliLevel = document.getElementById('biliLevel');
        const biliSign = document.getElementById('biliSign');
        const biliFans = document.getElementById('biliFans');
        const biliFollow = document.getElementById('biliFollow');
        const biliVideo = document.getElementById('biliVideo');
        const biliLike = document.getElementById('biliLike');
        const biliSex = document.getElementById('biliSex');
        const biliVip = document.getElementById('biliVip');
        const biliLink = document.getElementById('biliLink');

        // 页面加载完成后获取B站用户信息
        window.addEventListener('DOMContentLoaded', () => {
            fetchBiliUserInfo('616856644');
        });

        // 获取B站用户信息
        async function fetchBiliUserInfo(uid) {
            try {
                // 使用CORS代理解决跨域问题
                const proxyUrl = 'https://corsproxy.io/';

                const apiUrl = 'https://api.bilibili.com/x/web-interface/card';
                const response = await fetch(
                    `${proxyUrl}${apiUrl}?mid=${uid}&jsonp=jsonp&extra=true`,
                    {
                        method: 'GET',
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/126.0.0.0 Safari/537.36',
                            'Referer': 'https://www.bilibili.com/'
                        }
                    }
                );

                const result = await response.json();

                if (result.code !== 0) {
                    throw new Error(result.message || '获取B站用户信息失败');
                }

                // 提取并渲染用户数据
                const data = result.data;
                const card = data.card;

                renderBiliUserInfo({
                    uid: card.mid,
                    name: card.name,
                    avatar: card.face,
                    level: card.level_info.current_level,
                    sign: card.sign || '未设置签名',
                    sex: card.sex || '未知',
                    fans: card.fans || 0,
                    follow: card.attention || 0,
                    video: data.archive_count || 0,
                    like: data.like_num || 0,
                    vip: {
                        type: card.vip.type,
                        status: card.vip.status
                    }
                });

            } catch (err) {
                console.error('获取B站用户信息出错:', err);
                biliName.textContent = '获取信息失败';
            }
        }

        // 渲染B站用户信息
        function renderBiliUserInfo(user) {
            // 设置头像（通过代理加载）
            const proxy = 'https://corsproxy.io/';
            biliAvatar.src = proxy + user.avatar;
            biliAvatar.alt = `${user.name}的B站头像`;

            // 基础信息
            biliName.textContent = user.name;
            biliLevel.textContent = `LV.${user.level}`;
            biliSign.textContent = user.sign;

            // 统计数据（格式化大数字）
            biliFans.textContent = formatNumber(user.fans);
            biliFollow.textContent = formatNumber(user.follow);
            biliVideo.textContent = formatNumber(user.video);
            biliLike.textContent = formatNumber(user.like);

            // 性别信息
            biliSex.textContent = user.sex === '男' ? '男性' : user.sex === '女' ? '女性' : '未知';

            // 会员状态
            if (user.vip.status === 1) {
                biliVip.innerHTML = user.vip.type === 2
                    ? '<span class="text-orange-500 font-medium">大会员</span>'
                    : '<span class="text-bili-pink font-medium">普通会员</span>';
            } else {
                biliVip.textContent = '非会员';
            }

            // 空间链接
            biliLink.href = `https://space.bilibili.com/${user.uid}`;
        }

        // 格式化数字（1000→1k，10000→1w）
        function formatNumber(num) {
            if (num >= 100000000) return (num / 100000000).toFixed(1) + '亿';
            if (num >= 10000) return (num / 10000).toFixed(1) + 'w';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'k';
            return num.toString();
        }
    </script>

    <!-- 1. 背景样式 (放入CSS区域) -->
    <style>
        /* 背景容器 */
        .page-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* 确保在内容下方 */
            overflow: hidden;
        }

        /* 背景图片（带高斯模糊） */
        .page-background .bg-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* 保持比例填充 */
            filter: blur(3px);
            /* 模糊强度 */
            -webkit-filter: blur(3px);
            transform: scale(1.02);
            /* 解决模糊边缘问题 */
        }

        /* 黑色遮罩层 */
        .page-background .bg-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1);
            /* 10%透明度黑色 */
        }

        /* 高斯模糊半透明div样式 */
        .blur-transparent {
            /* 半透明效果，alpha值0.7可调整透明度 */
            background-color: rgba(255, 255, 255, 0.7);

            /* 高斯模糊效果，数值越大模糊程度越高 */
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            /* 兼容Safari浏览器 */

            /* 可选：添加一些边框和阴影增强视觉效果 */
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        .black-overlay {
            /* 10%透明度的黑色背景 */
            background-color: rgba(0, 0, 0, 0.1);

            /* 可选：添加过渡效果使遮罩变化更平滑 */
            transition: background-color 0.3s ease;
        }
    </style>

    <!-- 2. 背景组件 (放入HTML<body>标签内最顶部) -->
    <div class="page-background">
        <img src="res/bg.jpg" alt="背景图描述" class="bg-image">
        <div class="bg-overlay"></div>
    </div>

    <!-- 3. 内容区域适配建议 (可选) -->
    <style>
        /* 让内容区域与背景融合更好 */
        .content-container {
            background-color: rgba(255, 255, 255, 0.8);
            /* 半透明白色背景 */
            backdrop-filter: blur(4px);
            /* 内容区域轻微模糊 */
            /* 其他基础样式 */
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
    </style>
</body>

</html>
